<!DOCTYPE html>
<html>
<body>

<p>点击 W3School 的 logo 来下载该图片：<p>

<a href="" download id='down'>
1233
</a>
<img src="" alt="" id='img'>
  <script>
    var img = "https://pixabay.com/get/57e4d1474a50a914ea898074c42b347d083edbe35355784b762879.jpg";
    function getBase64Image(img) {
      var canvas = document.createElement("canvas");
      canvas.width = img.width;
      canvas.height = img.height;
      var ctx = canvas.getContext("2d");
      ctx.drawImage(img, 0, 0, img.width, img.height);
      var ext = img.src.substring(img.src.lastIndexOf(".")+1).toLowerCase();
          var dataURL = canvas.toDataURL("image/"+ext);
      return dataURL;
    }
    function dataURLtoBlob(dataurl) {
      var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
          bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
      while (n--) {
          u8arr[n] = bstr.charCodeAt(n);
      }
      return new Blob([u8arr], { type: mime });
  }
    var image = new Image();
    image.crossOrigin = '';
    image.src = img;
    image.onload = function(){
      var base64 = getBase64Image(image);
      console.log() 
      var url = window.URL.createObjectURL(dataURLtoBlob(base64))
      var down = document.getElementById("down");
      var img = document.getElementById("img");
      down.href = img.src = url
      
    }
  </script>
</body>
</html>